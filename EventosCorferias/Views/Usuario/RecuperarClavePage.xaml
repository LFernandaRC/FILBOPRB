<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EventosCorferias.Views.Usuario.RecuperarClavePage"
             xmlns:controls="clr-namespace:EventosCorferias.Controls"
             xmlns:resources="clr-namespace:EventosCorferias.Resources.RecursosIdioma"
             Title="RecuperarClavePage"
             BackgroundColor="White">
    <ContentPage.Content>
        <Grid RowSpacing="0"
         ColumnSpacing="0"
         Margin="10"
         Padding="0"
         BackgroundColor="Transparent">
            <ScrollView  VerticalOptions="Fill">
                <Grid BackgroundColor="White">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackLayout Grid.Row="0"
                      Padding="35,30,35,40"
                      Margin="0">
                        <ImageButton Source="ic_flecha_registro.png"
                          HorizontalOptions="Start"
                          VerticalOptions="Start"
                          Padding="0"
                          HeightRequest="30"
                          WidthRequest="30"
                          Margin="0, 0, 0, 0"
                          BackgroundColor="Transparent"
                          IsVisible="{Binding RegresarIcon}"
                          Command="{Binding Regresar}">
                        </ImageButton>
                        <Image Source="img_registro_cabeza.png"
                    HorizontalOptions="Start"
                    WidthRequest="180"
                    Margin="0, 30, 0, 0"/>
                    </StackLayout>

                    <StackLayout Grid.Row="1"
                      Padding="35,20,35,0"
                      Margin="0">
                        <Label Text="{x:Static resources:AppResources.recuperarContrasena}"
                    TextColor="{StaticResource TextoGeneral}"
                    FontSize="30"
                    FontFamily="NotoBold"/>
                        <Label Text="{x:Static resources:AppResources.registraElCorreoMas}"
                    TextColor="{StaticResource TextoGeneral}"
                    Margin="0,10,0,10"
                    FontSize="12"
                    FontFamily="NotoRegular"
                    IsVisible="{Binding Enviado2}"/>
                    </StackLayout>

                    <StackLayout Grid.Row="2"
                      Padding="35,10,35,0">
                        <Frame Style="{StaticResource FRegistroGeneral}"
                    IsVisible="{Binding Enviado2}"
                    BorderColor="{StaticResource BordeEntrada}"
                    BackgroundColor="{StaticResource FondoEntrada}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Image Grid.Column="0"
                            Source="ic_correo_obscuro.png"
                            WidthRequest="20"
                            Margin="10,0,15,0"
                            HorizontalOptions="Start"/>
                                <Entry HeightRequest="35"
                            BackgroundColor="Transparent"
                            x:Name="Entry100"
                            Grid.Column="1"
                            TextColor="{StaticResource TextoEntrada}"
                            PlaceholderColor="{StaticResource PlaceHolderEntrada}"
                            Placeholder="{x:Static resources:AppResources.ingresaTuCorreo}"
                            Text="{Binding EntCorreo, Mode=TwoWay}"
                            Style="{StaticResource ERegistroGeneralTexto}"/>
                            </Grid>
                        </Frame>

                        <Label  Margin="0,0,0,0"
                     Text="{x:Static resources:AppResources.enviamosUnCorreoMas}"
                     IsVisible="{Binding Enviado}"
                     TextColor="{StaticResource TextoGeneral}"
                     FontSize="12"
                     FontFamily="NotoRegular"/>
                        <Label Text="{Binding EntCorreo}"
                    TextColor="{StaticResource TextoGeneral}"
                    IsVisible="{Binding Enviado}"
                    FontSize="12"
                    FontFamily="NotoRegular"/>
                        <Label Text="{x:Static resources:AppResources.conElCodigoMas}"
                    Margin="0,0,0,10"
                    IsVisible="{Binding Enviado}"
                    TextColor="{StaticResource TextoGeneral}"
                    FontSize="12"
                    FontFamily="NotoRegular"/>
                    </StackLayout>

                    <StackLayout Grid.Row="3"
                      Padding="35,0,35,0"
                      IsVisible="{Binding Enviado}"
                      BackgroundColor="WhiteSmoke">
                        <Label Text="{x:Static resources:AppResources.ingresaElCodigo}"
                    FontSize="12"
                    FontFamily="NotoBold"
                    TextColor="{StaticResource TextoGeneral}"
                    HorizontalOptions="Center"
                    Margin="0,10,0,20"/>
                        <Grid ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="70"/>
                            </Grid.RowDefinitions>

                            <Frame Grid.Column="0"
                        BorderColor="{StaticResource BordeEntrada}"
                        BackgroundColor="{StaticResource FondoEntrada}"
                        Style="{StaticResource FRegistroGeneral}">
                                <Frame.CornerRadius>
                                    <OnPlatform x:TypeArguments="x:Single">
                                        <On Platform="iOS"
                                 Value="5"/>
                                        <On Platform="Android"
                                 Value="10"/>
                                    </OnPlatform>
                                </Frame.CornerRadius>
                                <Entry x:Name="EntCod1"
                            TextChanged="EntCod1_TextChanged"
                            Text="{Binding EntCod1, Mode=TwoWay}"
                            Style="{StaticResource ERegistroGeneralTexto}"
                            TextColor="{StaticResource TextoEntrada}"
                            PlaceholderColor="{StaticResource PlaceHolderEntrada}"
                            HorizontalTextAlignment="Center"
                            VerticalOptions="Center"
                            FontFamily="NotoMedium"
                            FontSize="25"
                            Keyboard="Numeric"
                            MaxLength="1"
                            BackgroundColor="Transparent"
                            Margin="0,0,0,0"/>
                            </Frame>

                            <Frame Grid.Column="1"
                        BorderColor="{StaticResource BordeEntrada}"
                        BackgroundColor="{StaticResource FondoEntrada}"
                        Padding="10,10,10,10"
                        Style="{StaticResource FRegistroGeneral}">
                                <Frame.CornerRadius>
                                    <OnPlatform x:TypeArguments="x:Single">
                                        <On Platform="iOS"
                                 Value="5"/>
                                        <On Platform="Android"
                                 Value="10"/>
                                    </OnPlatform>
                                </Frame.CornerRadius>
                                <Entry x:Name="EntCod2"
                            TextChanged="EntCod2_TextChanged"
                            Text="{Binding EntCod2, Mode=TwoWay}"
                            Style="{StaticResource ERegistroGeneralTexto}"
                            TextColor="{StaticResource TextoEntrada}"
                            PlaceholderColor="{StaticResource PlaceHolderEntrada}"
                            HorizontalTextAlignment="Center"
                            VerticalOptions="Center"
                            FontFamily="NotoMedium"
                            FontSize="25"
                            Keyboard="Numeric"
                            MaxLength="1"
                            BackgroundColor="Transparent"
                            Margin="0,0,0,0"/>
                            </Frame>

                            <Frame Grid.Column="2"
                        BorderColor="{StaticResource BordeEntrada}"
                        BackgroundColor="{StaticResource FondoEntrada}"
                        Padding="10,10,10,10"
                        Style="{StaticResource FRegistroGeneral}">
                                <Frame.CornerRadius>
                                    <OnPlatform x:TypeArguments="x:Single">
                                        <On Platform="iOS"
                                 Value="5"/>
                                        <On Platform="Android"
                                 Value="10"/>
                                    </OnPlatform>
                                </Frame.CornerRadius>
                                <Entry x:Name="EntCod3"
                            TextChanged="EntCod3_TextChanged"
                            Text="{Binding EntCod3, Mode=TwoWay}"
                            Style="{StaticResource ERegistroGeneralTexto}"
                            TextColor="{StaticResource TextoEntrada}"
                            PlaceholderColor="{StaticResource PlaceHolderEntrada}"
                            HorizontalTextAlignment="Center"
                            VerticalOptions="Center"
                            FontFamily="NotoMedium"
                            FontSize="25"
                            Keyboard="Numeric"
                            MaxLength="1"
                            BackgroundColor="Transparent"
                            Margin="0,0,0,0"/>
                            </Frame>

                            <Frame Grid.Column="3"
                        BorderColor="{StaticResource BordeEntrada}"
                        BackgroundColor="{StaticResource FondoEntrada}"
                        Padding="10,10,10,10"
                        Style="{StaticResource FRegistroGeneral}">
                                <Frame.CornerRadius>
                                    <OnPlatform x:TypeArguments="x:Single">
                                        <On Platform="iOS"
                                 Value="5"/>
                                        <On Platform="Android"
                                 Value="10"/>
                                    </OnPlatform>
                                </Frame.CornerRadius>
                                <Entry x:Name="EntCod4"
                            Text="{Binding EntCod4, Mode=TwoWay}"
                            Style="{StaticResource ERegistroGeneralTexto}"
                            TextColor="{StaticResource TextoEntrada}"
                            PlaceholderColor="{StaticResource PlaceHolderEntrada}"
                            HorizontalTextAlignment="Center"
                            VerticalOptions="Center"
                            FontFamily="NotoMedium"
                            FontSize="25"
                            Keyboard="Numeric"
                            MaxLength="1"
                            BackgroundColor="Transparent"
                            Margin="0,0,0,0"/>
                            </Frame>
                        </Grid>

                        <Label Text="{x:Static resources:AppResources.elCodigoNoMas}"
                    TextColor="{StaticResource TextoGeneral}"
                    HorizontalOptions="Center"
                    Margin="0,5,0,0"
                    IsVisible="{Binding Error}"
                    FontSize="12"
                    FontFamily="NotoRegular"/>
                    </StackLayout>

                    <StackLayout Grid.Row="4">
                        <Label Text="{x:Static resources:AppResources.generarUnCodigoMas}"
                    TextDecorations="Underline"
                    TextColor="{StaticResource TextoGeneral}"
                    IsVisible="{Binding Enviado}"
                    HorizontalOptions="Center"
                    Margin="0,10,0,10"
                    FontFamily="NotoBold"
                    FontSize="12">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding GenerarNuevo}"/>
                            </Label.GestureRecognizers>
                        </Label>
                        <Button Text="{x:Static resources:AppResources.continuar}"
                     Style="{StaticResource BtnGeneral}"
                     TextColor="{StaticResource BtnTextoObscuro}"
                     BorderColor="{StaticResource BtnBoderGeneralObscuro}"
                     BackgroundColor="{StaticResource BtnFondoGeneralObscuro}"
                     IsVisible="{Binding Enviado}"
                     Command="{Binding Comprobar}"
                     Margin="0,20,0,50"/>
                        <Button Text="{x:Static resources:AppResources.Enviar}"
                     Style="{StaticResource BtnGeneral}"
                     TextColor="{StaticResource BtnTextoObscuro}"
                     BorderColor="{StaticResource BtnBoderGeneralObscuro}"
                     BackgroundColor="{StaticResource BtnFondoGeneralObscuro}"
                     IsVisible="{Binding Enviado2}"
                     Command="{Binding Enviar}"
                     Margin="0,20,0,50"/>
                    </StackLayout>

                    <Grid BackgroundColor="{StaticResource FondoLoder}"
               VerticalOptions="Fill"
               HorizontalOptions="Fill"
               Margin="-20,-60"
               Grid.RowSpan="5"
               IsVisible="{Binding IsBusy}">
                        <ActivityIndicator IsRunning="true"
                                Color="{StaticResource IconoLoder}"
                                Margin="20"
                                HorizontalOptions="Center"
                                VerticalOptions="Center"/>
                    </Grid>
                </Grid>
            </ScrollView>
        </Grid>
    </ContentPage.Content>
</ContentPage> 